<!DOCTYPE html>
<html>
<head>
    <title>MMU HUB</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='qna_styles.css') }}"
</head>
<body>
    <div class="banner">
        <div class="navbar">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="MMU University Student Hub & Tutorial Website" class="banner-img">
            <ul>
                <li>
                    <a href="http://127.0.0.1:5000/register">
                        <img src="{{ url_for('static', filename='signup.png') }}" alt="Sign Up" class="nav-img">
                    </a>
                </li>
                <li>
                    <a href="http://127.0.0.1:5000/logout">
                        <img src="{{ url_for('static', filename='logout.png') }}" alt="Logout" class="nav-img">
                    </a>
                </li>
            </ul>
        </div>

        <div class="search-bar">
            <form action="{{ url_for('search_questions') }}" method="GET">
                <input type="text" name="query" placeholder="Search questions..." required>
                <button type="submit" class="button">Search</button>
            </form>
        </div>
        
        <div class="question-form">
            <h2>Post a New Question</h2>
            <form action="/submit-question" method="POST">
                <textarea name="question" placeholder="Type your question here..." required></textarea>
                <button type="submit" class="button">Post Question</button>
            </form>
        </div>

        
        {% for question in questions %}
        <div class="question">
            <h3><a href="{{ url_for('view_question', question_id=question.id) }}">{{ question.content }}</a></h3>
            <p>Posted by: <strong>{{ question.username }}</strong></p>
        </div>

        <div class="button-group"> 
            <form action="{{ url_for('edit_question', question_id=question.id) }}" method="GET" class="edit">
                <button type="submit" class="edit-btn">Edit</button>
            </form>

            <form action="{{ url_for('delete_question', question_id=question.id) }}" method="POST" class="delete-form">
                <button type="submit" class="delete-btn">Delete</button>
            </form>
        </div>

        {% endfor %}

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <ul>
            {% for category, message in messages %}
            {% if category == 'qna' %}
            <li style="color:rgb(0, 255, 136); font-weight:bold">{{ message }}</li>
            {% endif %}
            {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}
        
        <div class="pagination">
            {% if questions.has_prev %}
                <a href="{{ url_for('index', page=questions.prev_num) }}">&laquo; Previous</a>
            {% endif %}
        
            <span>Page {{ questions.page }} of {{ questions.pages }}</span>
        
            {% if questions.has_next %}
                <a href="{{ url_for('index', page=questions.next_num) }}">Next &raquo;</a>
            {% endif %}
        </div>
        
        
    </div>
</body>
</html>
